# AGENTS.md

## プロジェクト概要

このリポジトリは日本語のライトノベル執筆プロジェクトです。
「小説家になろう」や「カクヨム」などの小説投稿サイトへの投稿を想定しています。

## 言語設定

**重要**: このプロジェクトでは、すべての応答を日本語で行ってください。

## ファイル管理方式

各話は `001.txt`、`002.txt`、`003.txt` のように連番のテキストファイルで管理します。

### ファイル命名規則
- 3桁のゼロパディング番号 + `.txt` (例: 001.txt, 002.txt, ..., 099.txt, 100.txt)

### ファイル構造
各話のファイルには以下の情報を含めることを推奨:
- サブタイトル（1行目にコメントまたは独立行として記載）
- 本文

## エピソード管理

エピソードを更新した場合、 `episode.md` ファイルに目次と梗概を記載してください。


```
## 第1話 森の中の小さなカフェ

時系列を飛ばして、まずは辺境の地で営まれる「魔法薬カフェ」の日常風景を描く。
主人公アリアがカフェで働く様子、聖獣たちとの交流、訪れる客人たちとの触れ合いを通じて、彼女の新しい生活と心の平穏を表現する。
```

## ライトノベル執筆ガイドライン

### 文体と表現
- 一人称または三人称視点で執筆
- 会話文を多用し、キャラクターの個性を表現
- 文と会話の間には空行を入れる
  - 大きな塊ごとに改行を入れ、読みやすさを確保
- 1行当たりの文字数には注意（40〜60文字程度が目安）
- 適度に描写と説明を織り交ぜる
- 地の文は読みやすく、テンポよく
- ルビ(ふりがな)が必要な場合は `｜漢字《かんじ》` の形式で記述
- 1話あたり2000文字程度。長くても3000文字台を目安とする。できれば4000文字を超えないようにしてほしいが、描写する内容によっては多少超過しても構わない。
- 1つの話（第一部など）は20〜30話で完結するように構成
- 描写するために必要な設定が書かれていない場合は、設定を追記する
  - とくに、世界観に存在しないメニューが増えた場合には、詳細な説明を加える
  - 村の人々や宮廷の人などの人物設定が不足している場合も同様

## 推奨ディレクトリ構造

```
novel/
├── CLAUDE.md          # このファイル
├── README.md          # 作品概要
├── config/
│   └── index.md       # 設定ファイルのインデックス
├── characters/*.md    # キャラクター設定
├── world/*.md         # 世界観設定
├── plot/*.md          # プロット・あらすじ
├── episode.md         # 各話の目次・概要
├── episodes/*.txt     # 各話の本文
└── ...
```

## 設定ファイルの参照

プロジェクトの全ての設定ファイルの関係性は `config/index.md` にまとめられています。

### 新しいエピソードを執筆する際の手順

1. **設定インデックスの確認**: `config/index.md` を開いて、執筆に必要な設定ファイルを確認
2. **プロット確認**: 該当する部の `plot/*.md` を参照
3. **キャラクター確認**: 登場するキャラクターの `characters/*.md` を参照
4. **世界設定確認**: 舞台となる場所の `world/*.md` を参照
5. **既存エピソード確認**: `episode.md` で前後の話の流れを確認
6. **執筆**: `episodes/XXX.txt` にテキストを執筆
7. **目次更新**: `episode.md` に新しい話の梗概を追記

## 執筆時の注意点

- 各話は独立したテキストファイルとして管理
- 定期的にバックアップを取る（git commit）
- キャラクター設定、世界観設定は別ファイルで管理し、一貫性を保つ
- プロット、伏線の管理を行う
- 設定を追加・変更した場合は、`config/index.md` も更新する

## 文字数チェックの方法

エピソード執筆後は、以下のコマンドで正確な文字数をチェックしてください。

### 推奨: Pythonでの正確な文字数カウント

```bash
python3 -c "
import re

with open('episodes/XXX.txt', 'r', encoding='utf-8') as f:
    content = f.read()

# 総文字数（改行・空白含む）
total_chars = len(content)

# 空白・改行を除いた文字数（本文のみ）
no_whitespace = re.sub(r'\s+', '', content)
pure_text = len(no_whitespace)

print(f'総文字数（改行・空白含む）: {total_chars}文字')
print(f'本文のみ（空白・改行除去）: {pure_text}文字')
"
```

**判定基準**:
- **主な目安**: 2,000〜3,000文字（本文のみ）
- **許容範囲**: 1,500〜3,500文字（本文のみ）
- **要検討**: 3,500文字超過、または1,500文字未満

### 注意事項

- AIエージェント（story-editorなど）の文字数カウントは誤差が大きい場合があるため、必ず上記のコマンドで確認してください
- 文字数は「本文のみ（空白・改行除去）」の値を基準に判断してください
- ガイドラインでは「2000文字程度（2000文字台を想定）、長くても3000文字台」と記載していますが、これは本文のみの文字数を指します
